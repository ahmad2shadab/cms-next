<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register New Grievance - e-Nivaran</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(222.2 84% 4.9%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(222.2 47.4% 11.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        card: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                    },
                }
            },
            darkMode: 'class',
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body class="min-h-screen bg-background font-sans antialiased">
    <!-- Header -->
    <div id="header-container"></div>
    
    <!-- Main Layout -->
    <div class="flex">
        <!-- Sidebar -->
        <div id="sidebar-container"></div>
        
        <!-- Main Content -->
        <main class="flex-1 lg:ml-64 transition-all duration-300 ease-in-out">
            <div class="p-4 sm:p-6 lg:p-8">
                <!-- Page Header -->
                <div class="mb-6 sm:mb-8">
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-3 sm:space-y-0">
                            <div class="flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white">
                                <i class="fas fa-plus-circle text-lg sm:text-xl"></i>
                            </div>
                            <div>
                                <h1 class="text-2xl sm:text-3xl font-bold text-card-foreground">Register New Grievance</h1>
                                <p class="text-sm sm:text-base text-muted-foreground">Submit your grievance details and we'll help resolve your concerns</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Registration Form -->
                <form id="grievanceForm" class="space-y-6 sm:space-y-8">
                    <!-- Employment Details -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-2 sm:space-y-0">
                            <div class="flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-green-100 dark:bg-green-900">
                                <i class="fas fa-building h-3 w-3 sm:h-4 sm:w-4 text-green-600 dark:text-green-400"></i>
                            </div>
                            <h2 class="text-lg sm:text-xl font-semibold text-card-foreground">Employment Details</h2>
                        </div>
                        
                        <div class="grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2">
                            <div class="space-y-2">
                                <label for="subsidiary" class="text-sm font-medium text-foreground">
                                    Subsidiary *
                                </label>
                                <select
                                    id="subsidiary"
                                    name="subsidiary"
                                    required
                                    class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-slate-900 shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                >
                                    <option value="">Select Subsidiary</option>
                                    <option value="ECL">Eastern Coalfields Limited (ECL)</option>
                                    <option value="BCCL">Bharat Coking Coal Limited (BCCL)</option>
                                    <option value="CCL">Central Coalfields Limited (CCL)</option>
                                    <option value="SECL">South Eastern Coalfields Limited (SECL)</option>
                                    <option value="WCL">Western Coalfields Limited (WCL)</option>
                                    <option value="NCL">Northern Coalfields Limited (NCL)</option>
                                    <option value="MCL">Mahanadi Coalfields Limited (MCL)</option>
                                </select>
                            </div>
                            
                            <div class="space-y-2">
                                <label for="area" class="text-sm font-medium text-foreground">
                                    Area/Unit *
                                </label>
                                <select
                                    id="area"
                                    name="area"
                                    required
                                    class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-slate-900 shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                >
                                    <option value="">Select Area/Unit</option>
                                </select>
                            </div>
                            
                            <div class="space-y-2">
                                <label for="designation" class="text-sm font-medium text-foreground">
                                    Last Designation *
                                </label>
                                <input
                                    type="text"
                                    id="designation"
                                    name="designation"
                                    required
                                    class="flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                    placeholder="Enter your last designation"
                                />
                            </div>
                            
                            <div class="space-y-2">
                                <label for="department" class="text-sm font-medium text-foreground">
                                    Department *
                                </label>
                                <select
                                    id="department"
                                    name="department"
                                    required
                                    class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-slate-900 shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                >
                                    <option value="">Select Department</option>
                                    <option value="mining">Mining</option>
                                    <option value="mechanical">Mechanical</option>
                                    <option value="electrical">Electrical</option>
                                    <option value="civil">Civil</option>
                                    <option value="personnel">Personnel</option>
                                    <option value="finance">Finance</option>
                                    <option value="medical">Medical</option>
                                    <option value="security">Security</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Grievance Details -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-2 sm:space-y-0">
                            <div class="flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-orange-100 dark:bg-orange-900">
                                <i class="fas fa-exclamation-circle h-3 w-3 sm:h-4 sm:w-4 text-orange-600 dark:text-orange-400"></i>
                            </div>
                            <h2 class="text-lg sm:text-xl font-semibold text-card-foreground">Grievance Details</h2>
                        </div>
                        
                        <div class="space-y-4 sm:space-y-6">
                            <div class="grid gap-4 sm:gap-6 grid-cols-1 md:grid-cols-2">
                                <div class="space-y-2">
                                    <label for="category" class="text-sm font-medium text-foreground">
                                        Grievance Category *
                                    </label>
                                    <select
                                        id="category"
                                        name="category"
                                        required
                                        class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-slate-900 shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                    >
                                        <option value="">Select Category</option>
                                        <option value="pension">Pension Related</option>
                                        <option value="gratuity">Gratuity</option>
                                        <option value="medical">Medical Reimbursement</option>
                                        <option value="pf">Provident Fund</option>
                                        <option value="leave">Leave Encashment</option>
                                        <option value="increment">Increment/Pay Scale</option>
                                        <option value="transfer">Transfer Related</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div class="space-y-2">
                                    <label for="priority" class="text-sm font-medium text-foreground">
                                        Priority Level *
                                    </label>
                                    <select
                                        id="priority"
                                        name="priority"
                                        required
                                        class="flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm text-slate-900 shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50"
                                    >
                                        <option value="">Select Priority</option>
                                        <option value="low">Low</option>
                                        <option value="medium">Medium</option>
                                        <option value="high">High</option>
                                        <option value="urgent">Urgent</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="space-y-2">
                                <label for="description" class="text-sm font-medium text-foreground">
                                    Detailed Description *
                                </label>
                                <textarea
                                    id="description"
                                    name="description"
                                    required
                                    rows="6"
                                    maxlength="2000"
                                    class="flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 resize-none"
                                    placeholder="Provide detailed description of your grievance, including any relevant dates, amounts, or reference numbers..."
                                ></textarea>
                                <p class="text-xs text-muted-foreground">Maximum 2000 characters</p>
                            </div>
                        </div>
                    </div>

                    <!-- Supporting Documents -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-2 sm:space-y-0">
                            <div class="flex h-6 w-6 sm:h-8 sm:w-8 items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-900">
                                <i class="fas fa-paperclip h-3 w-3 sm:h-4 sm:w-4 text-purple-600 dark:text-purple-400"></i>
                            </div>
                            <h2 class="text-lg sm:text-xl font-semibold text-card-foreground">Supporting Documents</h2>
                        </div>
                        
                        <div class="space-y-4">
                            <p class="text-xs sm:text-sm text-muted-foreground">
                                Upload relevant documents to support your grievance (PDF, JPG, PNG formats only, max 5MB each)
                            </p>
                            
                            <div class="grid gap-4 grid-cols-1 md:grid-cols-2">
                                <div class="space-y-2">
                                    <label for="document1" class="text-sm font-medium text-foreground">Document</label>
                                    <input
                                    type="file"
                                    id="document1"
                                    name="document1"
                                    accept=".pdf,.jpg,.jpeg,.png"
                                    multiple
                                    class="flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm transition 
                                           file:mr-4 file:py-1.5 file:px-3
                                           file:rounded-md file:border file:border-slate-300
                                           file:text-sm file:font-medium file:text-slate-700
                                           file:bg-white file:transition-colors
                                           hover:file:bg-slate-50
                                           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                  />
                                  
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="flex flex-col gap-3 sm:gap-4 pt-4 sm:pt-6 sm:flex-row sm:justify-end">
                        <button
                            type="button"
                            onclick="window.history.back();"
                            class="inline-flex items-center justify-center rounded-md border border-input bg-background px-6 sm:px-8 py-2 text-sm text-slate-900 font-medium shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"
                        >
                            <i class="fas fa-arrow-left mr-2 h-4 w-4"></i>
                            Cancel
                        </button>
                        
                        <button
                            type="submit"
                            class="inline-flex items-center justify-center rounded-md bg-primary px-6 sm:px-8 py-2 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"
                        >
                            <i class="fas fa-paper-plane mr-2 h-4 w-4"></i>
                            Submit Grievance
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    
    <!-- Footer -->
    <div id="footer-container" class="lg:ml-64"></div>
    
    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load components
            loadComponent('header.html', 'header-container');
            loadComponent('sidebar.html', 'sidebar-container');
            loadComponent('footer.html', 'footer-container');
            
            // Initialize form
            initializeForm();
        });
        
        function loadComponent(file, containerId) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(containerId).innerHTML = data;
                    if (file === 'header.html') initializeHeader();
                    if (file === 'sidebar.html') initializeSidebar();
                })
                .catch(error => console.error('Error loading component:', error));
        }
        
        function initializeForm() {
            const form = document.getElementById('grievanceForm');
            
            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                
                // Show loading state
                submitBtn.innerHTML = '<i class="fas fa-spinner animate-spin mr-2 h-4 w-4"></i>Submitting...';
                submitBtn.disabled = true;
                
                // Simulate form submission
                setTimeout(() => {
                    alert('Grievance submitted successfully! You will receive a confirmation email shortly.');
                    
                    // Reset form and button
                    form.reset();
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                    // Navigate to dashboard
                    navigateToSection('dashboard');
                }, 2000);
            });
            
            // Character counting
            const description = document.getElementById('description');
            const subject = document.getElementById('subject');
            
            [description, subject].forEach(field => {
                if (field) {
                    field.addEventListener('input', function() {
                        const maxLength = parseInt(field.getAttribute('maxlength'));
                        const currentLength = field.value.length;
                        const remaining = maxLength - currentLength;
                        
                        const helpText = field.parentNode.querySelector('p');
                        if (helpText) {
                            helpText.textContent = `${remaining} characters remaining`;
                            helpText.className = remaining < 50 ? 'text-xs text-red-500' : 'text-xs text-muted-foreground';
                        }
                    });
                }
            });
            
            // File validation
            document.querySelectorAll('input[type="file"]').forEach(input => {
                input.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        // File size validation (5MB)
                        if (file.size > 5 * 1024 * 1024) {
                            alert('File size must be less than 5MB');
                            e.target.value = '';
                            return;
                        }
                        
                        // File type validation
                        const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'];
                        if (!allowedTypes.includes(file.type)) {
                            alert('File type not supported. Please upload JPG, PNG, GIF, or PDF files.');
                            e.target.value = '';
                            return;
                        }
                    }
                });
            });
        }
        
        function navigateToSection(section) {
            console.log('Navigate to:', section);
        }
    </script>
</body>
</html>