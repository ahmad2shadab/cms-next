<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>e-Nivaran - Grievance Management System</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              border: 'hsl(214.3 31.8% 91.4%)',
              input: 'hsl(214.3 31.8% 91.4%)',
              ring: 'hsl(222.2 84% 4.9%)',
              background: 'hsl(0 0% 100%)',
              foreground: 'hsl(222.2 84% 4.9%)',
              primary: {
                DEFAULT: 'hsl(222.2 47.4% 11.2%)',
                foreground: 'hsl(210 40% 98%)',
              },
              secondary: {
                DEFAULT: 'hsl(210 40% 96%)',
                foreground: 'hsl(222.2 84% 4.9%)',
              },
              destructive: {
                DEFAULT: 'hsl(0 84.2% 60.2%)',
                foreground: 'hsl(210 40% 98%)',
              },
              muted: {
                DEFAULT: 'hsl(210 40% 96%)',
                foreground: 'hsl(215.4 16.3% 46.9%)',
              },
              accent: {
                DEFAULT: 'hsl(210 40% 96%)',
                foreground: 'hsl(222.2 84% 4.9%)',
              },
              popover: {
                DEFAULT: 'hsl(0 0% 100%)',
                foreground: 'hsl(222.2 84% 4.9%)',
              },
              card: {
                DEFAULT: 'hsl(0 0% 100%)',
                foreground: 'hsl(222.2 84% 4.9%)',
              },
            },
            borderRadius: {
              lg: 'var(--radius)',
              md: 'calc(var(--radius) - 2px)',
              sm: 'calc(var(--radius) - 4px)',
            },
          },
        },
        darkMode: 'class',
      };
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body
    class="page-index min-h-screen bg-slate-50 bg-[url('https://docs.coalindia.in/img/cil-bg.jpg')] bg-cover bg-center bg-no-repeat bg-fixed"
  >
    <div id="header-container"></div>

    <div class="flex">
      <main class="flex-1 transition-all duration-300 ease-in-out">
        <div class="relative w-full">
          <div
            class="flex flex-col md:flex-row md:gap-4 md:h-[calc(100vh-9rem)] overflow-y-auto"
          >
            <aside
              class="order-1 md:order-2 md:w-2/5 w-full flex items-center justify-center pt-6 pb-4 md:p-0"
            >
              <div
                class="bg-white rounded-xl shadow-lg w-full max-w-md mx-4 overflow-hidden"
              >
                <div
                  class="bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 text-white"
                >
                  <div class="flex items-center space-x-3">
                    <div
                      class="flex h-10 w-10 items-center justify-center rounded-full bg-white/20"
                    >
                      <i class="fas fa-user text-white"></i>
                    </div>
                    <div>
                      <h2 class="text-lg text-white font-semibold">
                        User Login
                      </h2>
                      <p id="stepIndicator" class="text-sm text-blue-100">
                        Step 1 of 3
                      </p>
                    </div>
                  </div>
                </div>

                <div class="px-6 py-4 bg-slate-50">
                  <div class="flex items-center">
                    <div
                      id="step1Dot"
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 text-white text-sm font-medium"
                    >
                      1
                    </div>
                    <div
                      id="step1Line"
                      class="flex-1 h-1 mx-2 bg-slate-300"
                    ></div>
                    <div
                      id="step2Dot"
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-slate-300 text-slate-500 text-sm font-medium"
                    >
                      2
                    </div>
                    <div
                      id="step2Line"
                      class="flex-1 h-1 mx-2 bg-slate-300"
                    ></div>
                    <div
                      id="step3Dot"
                      class="flex items-center justify-center w-8 h-8 rounded-full bg-slate-300 text-slate-500 text-sm font-medium"
                    >
                      3
                    </div>
                  </div>
                </div>

                <div class="p-6">
                  <div id="loginStep1" class="step-form">
                    <div class="space-y-4">
                      <div>
                        <label
                          for="employeeCodePan"
                          class="block text-sm font-medium text-slate-700 mb-2"
                        >
                          Employee Code or PAN *
                        </label>
                        <div class="relative">
                          <div
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                          >
                            <i class="fas fa-id-card text-slate-400"></i>
                          </div>
                          <input
                            type="text"
                            id="employeeCodePan"
                            name="employeeCodePan"
                            required
                            maxlength="10"
                            placeholder="Employee Code or PAN"
                            oninput="this.value = this.value.toUpperCase()"
                            class="block w-full pl-10 pr-3 py-3 text-slate-900 bg-gray-100 text-sm outline-none caret-blue-600 border-b-2 border-transparent focus:border-blue-500 rounded-md placeholder-slate-400 autofill:shadow-[inset_0_0_0px_1000px_rgba(255,255,255,0.7)] autofill:[-webkit-text-fill-color:#1e293b]"
                          />
                        </div>
                        <p
                          id="step1Error"
                          class="mt-2 text-sm text-red-600 hidden"
                        >
                          Please enter a valid Employee Code or PAN
                        </p>
                        <p class="mt-1 text-xs text-slate-500">
                          Test with: CIL123
                        </p>
                      </div>

                      <button
                        type="button"
                        id="verifyUserButton"
                        class="w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-full shadow-md hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium"
                      >
                        <i class="fas fa-shield-check mr-2"></i>
                        Verify User
                      </button>

                      <div class="text-center pt-2">
                        <a
                          href="#"
                          onclick="switchToAdmin()"
                          class="inline-flex items-center px-6 py-2 rounded-full text-sm font-medium bg-white/30 backdrop-blur-md border border-white/40 text-slate-700 shadow-md hover:bg-white/40 hover:text-slate-900 hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all duration-300 ease-in-out"
                        >
                          <i class="fas fa-arrows-rotate mr-2"></i>
                          Admin Panel
                        </a>
                      </div>
                    </div>
                  </div>

                  <div id="loginStep2" class="step-form hidden">
                    <div class="space-y-4">
                      <div>
                        <label
                          for="mobileNumber"
                          class="block text-sm font-medium text-slate-700 mb-2"
                        >
                          Mobile Number *
                        </label>
                        <div class="relative">
                          <div
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                          >
                            <i
                              class="fas fa-mobile-screen-button text-slate-400"
                            ></i>
                          </div>
                          <input
                            type="tel"
                            id="mobileNumber"
                            name="mobileNumber"
                            required
                            maxlength="10"
                            placeholder="Enter 10-digit mobile number"
                            class="block w-full pl-10 pr-3 py-3 text-slate-900 bg-gray-100 text-sm outline-none caret-blue-600 border-b-2 border-transparent focus:border-blue-500 rounded-md placeholder-slate-400 autofill:shadow-[inset_0_0_0px_1000px_rgba(255,255,255,0.3)] autofill:[-webkit-text-fill-color:#1e293b]"
                          />
                        </div>
                        <p
                          id="step2Error"
                          class="mt-2 text-sm text-red-600 hidden"
                        >
                          Please enter a valid 10-digit mobile number
                        </p>
                        <p class="mt-1 text-xs text-slate-500">
                          Test with: 9876543210
                        </p>
                      </div>

                      <button
                        type="button"
                        id="generateOtpButton"
                        class="w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-full shadow-md hover:bg-blue-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium"
                      >
                        <i class="fas fa-key mr-2"></i>
                        Generate OTP
                      </button>
                    </div>
                  </div>

                  <div id="loginStep3" class="step-form hidden">
                    <div class="space-y-4">
                      <div>
                        <label
                          for="otp"
                          class="block text-sm font-medium text-slate-700 mb-2"
                        >
                          Enter OTP *
                        </label>
                        <div class="relative">
                          <div
                            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                          >
                            <i class="fas fa-lock text-slate-400"></i>
                          </div>
                          <input
                            type="text"
                            id="otp"
                            name="otp"
                            required
                            maxlength="6"
                            placeholder="Enter 6-digit OTP"
                            class="block w-full pl-10 pr-3 py-3 text-slate-900 bg-gray-100 text-sm outline-none caret-blue-600 border-b-2 border-transparent focus:border-blue-500 rounded-md placeholder-slate-400 autofill:shadow-[inset_0_0_0px_1000px_rgba(255,255,255,0.3)] autofill:[-webkit-text-fill-color:#1e293b]"
                          />
                        </div>
                        <p
                          id="step3Error"
                          class="mt-2 text-sm text-red-600 hidden"
                        >
                          Please enter a valid 6-digit OTP
                        </p>
                        <p class="mt-1 text-xs text-slate-500">
                          OTP sent to your registered mobile number
                        </p>
                        <p class="text-xs text-slate-500">Test with: 123456</p>
                      </div>

                      <button
                        type="button"
                        id="verifyOtpButton"
                        class="w-full flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-full shadow-md hover:bg-green-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors font-medium"
                      >
                        <i class="fas fa-right-to-bracket mr-2"></i>
                        Verify OTP and Login
                      </button>
                    </div>
                  </div>

                  <div id="backButtonContainer" class="mt-4 hidden">
                    <button
                      type="button"
                      id="backButton"
                      class="inline-flex items-center px-6 py-2 rounded-full text-sm font-medium bg-white/30 backdrop-blur-md border border-white/40 text-slate-700 shadow-md hover:bg-white/40 hover:text-slate-900 hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all duration-300 ease-in-out"
                    >
                      <i class="fas fa-arrow-left mr-2"></i>
                    </button>
                  </div>
                </div>
              </div>
            </aside>

            <section
              class="order-2 md:order-1 md:w-3/5 w-full flex items-center justify-center px-4 pb-6 md:p-4"
            >
              <div
                class="bg-white/70 backdrop-blur-lg rounded-xl shadow-lg p-6 lg:p-8 w-full h-full flex flex-col justify-center overflow-hidden"
              >
                <h1
                  class="text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-800 mb-4"
                >
                  Welcome to
                  <span
                    class="bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent"
                  >
                    e-Nivaran
                  </span>
                </h1>
                <div class="border-b-2 border-orange-400 w-16 mb-6"></div>

                <div
                  class="space-y-4 text-sm sm:text-base lg:text-lg text-slate-700 leading-relaxed text-justify"
                >
                  <p class="text-xl space-x-3 space-y-4">
                    e-Nivaran is a dedicated online platform launched by Coal
                    India Limited (CIL) for facilitating the redressal of
                    grievances submitted by separated employees and their
                    dependents. This initiative aims to provide a transparent,
                    efficient, and timely grievance resolution mechanism.
                    Through this portal, former employees of CIL and its
                    subsidiaries can register their concerns directly with the
                    relevant subsidiary company. The portal ensures real-time
                    tracking of grievance status, with regular updates
                    communicated via SMS and email.
                  </p>
                  <p class="text-xl space-x-3 space-y-4">
                    To register a grievance, users may log in using their
                    Employee Number or PAN Number and authenticate via a
                    One-Time Password (OTP) sent to their registered mobile
                    number. If login credentials are unavailable, users may fill
                    out a registration form by providing details of their last
                    posting. Upon verification, the respective subsidiary nodal
                    officer will approve the registration.
                  </p>
                  <p class="text-xl space-x-3 space-y-4">
                    This platform reflects CIL's commitment to supporting and
                    addressing the concerns of its former workforce with
                    accountability and responsiveness.
                  </p>
                </div>
              </div>
            </section>
          </div>
        </div>
      </main>
    </div>

    <div id="footer-container"></div>

    <script src="script.js"></script>
    <script>
      // Simulated authentication status
      const isLoggedIn = false; // Change to true if user is authenticated

      // Load components
      document.addEventListener('DOMContentLoaded', function () {
        loadComponent('header.html', 'header-container');

        // Only load sidebar if user is logged in
        if (isLoggedIn) {
          loadComponent('sidebar.html', 'sidebar-container');
        }

        loadComponent('footer.html', 'footer-container');
      });

      function loadComponent(file, containerId) {
        fetch(file)
          .then((response) => response.text())
          .then((data) => {
            document.getElementById(containerId).innerHTML = data;
            if (file === 'header.html') initializeHeader();
            if (file === 'sidebar.html') initializeSidebar();
          })
          .catch((error) => console.error('Error loading component:', error));
      }
    </script>
    <script>
      let currentStep = 1;

      function showStep(step) {
        currentStep = step;

        // Hide all steps
        document.querySelectorAll('.step-form').forEach((form) => {
          form.classList.add('hidden');
        });

        // Show current step
        document.getElementById(`loginStep${step}`).classList.remove('hidden');

        // Update progress indicator
        document.getElementById(
          'stepIndicator'
        ).textContent = `Step ${step} of 3`;

        // Update progress dots
        updateProgressDots(step);

        // Show/hide back button
        const backContainer = document.getElementById('backButtonContainer');
        if (step > 1) {
          backContainer.classList.remove('hidden');
        } else {
          backContainer.classList.add('hidden');
        }
      }

      function updateProgressDots(step) {
        // Reset all dots and lines
        for (let i = 1; i <= 3; i++) {
          const dot = document.getElementById(`step${i}Dot`);
          const line = document.getElementById(`step${i}Line`);

          if (i <= step) {
            dot.className =
              'flex items-center justify-center w-8 h-8 rounded-full bg-blue-600 text-white text-sm font-medium';
            if (line) line.className = 'flex-1 h-1 mx-2 bg-blue-600';
          } else {
            dot.className =
              'flex items-center justify-center w-8 h-8 rounded-full bg-slate-300 text-slate-500 text-sm font-medium';
            if (line) line.className = 'flex-1 h-1 mx-2 bg-slate-300';
          }
        }
      }

      function nextStep() {
        clearAllErrors();
        if (currentStep < 3) {
          showStep(currentStep + 1);
        }
      }

      function previousStep() {
        if (currentStep > 1) {
          clearAllErrors();
          showStep(currentStep - 1);
        }
      }

      function showError(errorId, message = null) {
        const errorEl = document.getElementById(errorId);
        if (message) {
          errorEl.textContent = message;
        }
        errorEl.classList.remove('hidden');
      }

      function clearAllErrors() {
        ['step1Error', 'step2Error', 'step3Error'].forEach((id) => {
          document.getElementById(id).classList.add('hidden');
        });
      }

      function switchToAdmin() {
        alert('Admin login functionality to be implemented');
      }

      // Form validation and submission
      document.addEventListener('DOMContentLoaded', function () {
        // Initialize with step 1
        showStep(1);

        // Step 1: Verify User
        document
          .getElementById('verifyUserButton')
          .addEventListener('click', function () {
            const employeeCode = document
              .getElementById('employeeCodePan')
              .value.trim();

            clearAllErrors();

            if (!employeeCode) {
              showError('step1Error', 'Employee Code or PAN is required');
              return;
            }

            // Mock validation - replace with actual API call
            if (employeeCode === 'CIL123') {
              nextStep();
            } else {
              showError(
                'step1Error',
                'Invalid Employee Code or PAN. Try CIL123 for testing.'
              );
            }
          });

        // Step 2: Generate OTP
        document
          .getElementById('generateOtpButton')
          .addEventListener('click', function () {
            const mobileNumber = document
              .getElementById('mobileNumber')
              .value.trim();

            clearAllErrors();

            if (!/^\d{10}$/.test(mobileNumber)) {
              showError(
                'step2Error',
                'Please enter a valid 10-digit mobile number'
              );
              return;
            }

            // Mock validation - replace with actual API call
            if (mobileNumber === '9876543210') {
              nextStep();
            } else {
              showError(
                'step2Error',
                'Invalid mobile number. Try 9876543210 for testing.'
              );
            }
          });

        // Step 3: Verify OTP
        document
          .getElementById('verifyOtpButton')
          .addEventListener('click', function () {
            const otp = document.getElementById('otp').value.trim();

            clearAllErrors();

            if (!/^\d{6}$/.test(otp)) {
              showError('step3Error', 'Please enter a valid 6-digit OTP');
              return;
            }

            // Mock validation - replace with actual API call
            if (otp === '123456') {
              // Success - redirect to dashboard
              alert('Login successful! Redirecting to dashboard...');
              window.location.href = 'dashboard.html';
            } else {
              showError('step3Error', 'Invalid OTP. Try 123456 for testing.');
            }
          });

        // Back button
        document
          .getElementById('backButton')
          .addEventListener('click', previousStep);

        // Enter key support
        document.addEventListener('keydown', function (e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            const currentForm = document.getElementById(
              `loginStep${currentStep}`
            );
            const button = currentForm.querySelector('button[type="button"]');
            if (button) button.click();
          }
        });
      });
    </script>
  </body>
</html>
