<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - e-Nivaran</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(222.2 84% 4.9%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(222.2 47.4% 11.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                        card: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                    },
                }
            },
            darkMode: 'class',
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="min-h-screen bg-background font-sans antialiased">
    <!-- Header -->
    <div id="header-container"></div>
    
    <!-- Main Layout -->
    <div class="flex">
        <!-- Sidebar -->
        <div id="sidebar-container"></div>
        
        <!-- Main Content -->
        <main class="flex-1 lg:ml-64 transition-all duration-300 ease-in-out">
            <div class="p-4 sm:p-6 lg:p-8">
                <!-- Dashboard Header -->
                <div class="mb-6 sm:mb-8">
                    <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
                        <div class="space-y-2">
                            <h1 class="text-2xl sm:text-3xl font-bold tracking-tight text-foreground">Dashboard</h1>
                            <p class="text-sm sm:text-base text-muted-foreground">
                                Welcome back! Here's an overview of your grievance management system.
                            </p>
                        </div>
                        <div class="flex flex-col gap-2 sm:flex-row">
                            <button class="inline-flex items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm text-slate-700 font-medium shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring">
                                <i class="fas fa-download mr-2 h-4 w-4"></i>
                                <span class="hidden sm:inline">Export Report</span>
                                <span class="sm:hidden">Export</span>
                            </button>
                            <button onclick="navigateToSection('register')" class="inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring">
                                <i class="fas fa-plus mr-2 h-4 w-4"></i>
                                <span class="hidden sm:inline">New Grievance</span>
                                <span class="sm:hidden">New</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 mb-6 sm:mb-8">
                    <!-- Total Grievances -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex items-center justify-between">
                            <div class="space-y-2">
                                <p class="text-xs sm:text-sm font-medium text-muted-foreground">Total Grievances</p>
                                <p class="text-2xl sm:text-3xl font-bold text-card-foreground" id="totalGrievances">0</p>
                            </div>
                            <div class="rounded-full bg-blue-100 p-2 sm:p-3 dark:bg-blue-900">
                                <i class="fas fa-clipboard-list h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"></i>
                            </div>
                        </div>
                        <div class="mt-3 sm:mt-4 flex items-center text-xs sm:text-sm">
                            <i class="fas fa-arrow-up mr-1 h-3 w-3 text-green-500"></i>
                            <span class="text-green-600 dark:text-green-400">+12%</span>
                            <span class="text-muted-foreground ml-1">from last month</span>
                        </div>
                    </div>

                    <!-- Pending Grievances -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex items-center justify-between">
                            <div class="space-y-2">
                                <p class="text-xs sm:text-sm font-medium text-muted-foreground">Pending</p>
                                <p class="text-2xl sm:text-3xl font-bold text-card-foreground" id="pendingGrievances">0</p>
                            </div>
                            <div class="rounded-full bg-yellow-100 p-2 sm:p-3 dark:bg-yellow-900">
                                <i class="fas fa-clock h-5 w-5 sm:h-6 sm:w-6 text-yellow-600 dark:text-yellow-400"></i>
                            </div>
                        </div>
                        <div class="mt-3 sm:mt-4 flex items-center text-xs sm:text-sm">
                            <i class="fas fa-exclamation-triangle mr-1 h-3 w-3 text-yellow-500"></i>
                            <span class="text-muted-foreground">Requires attention</span>
                        </div>
                    </div>

                    <!-- In Process -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex items-center justify-between">
                            <div class="space-y-2">
                                <p class="text-xs sm:text-sm font-medium text-muted-foreground">In Process</p>
                                <p class="text-2xl sm:text-3xl font-bold text-card-foreground" id="inProcessGrievances">0</p>
                            </div>
                            <div class="rounded-full bg-blue-100 p-2 sm:p-3 dark:bg-blue-900">
                                <i class="fas fa-spinner h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"></i>
                            </div>
                        </div>
                        <div class="mt-3 sm:mt-4 flex items-center text-xs sm:text-sm">
                            <i class="fas fa-cogs mr-1 h-3 w-3 text-blue-500"></i>
                            <span class="text-muted-foreground">Being processed</span>
                        </div>
                    </div>

                    <!-- Resolved -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex items-center justify-between">
                            <div class="space-y-2">
                                <p class="text-xs sm:text-sm font-medium text-muted-foreground">Resolved</p>
                                <p class="text-2xl sm:text-3xl font-bold text-card-foreground" id="resolvedGrievances">0</p>
                            </div>
                            <div class="rounded-full bg-green-100 p-2 sm:p-3 dark:bg-green-900">
                                <i class="fas fa-check-circle h-5 w-5 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"></i>
                            </div>
                        </div>
                        <div class="mt-3 sm:mt-4 flex items-center text-xs sm:text-sm">
                            <i class="fas fa-check mr-1 h-3 w-3 text-green-500"></i>
                            <span class="text-green-600 dark:text-green-400">80.4%</span>
                            <span class="text-muted-foreground ml-1">success rate</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid gap-4 sm:gap-6 grid-cols-1 lg:grid-cols-2 mb-6 sm:mb-8">
                    <!-- Grievance Status Chart -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0">
                            <h3 class="text-base sm:text-lg font-semibold text-card-foreground">Grievance Status</h3>
                            <div class="flex gap-2">
                                <button class="rounded-md bg-muted px-2 sm:px-3 py-1 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground">
                                    Weekly
                                </button>
                                <button class="rounded-md bg-primary px-2 sm:px-3 py-1 text-xs text-primary-foreground">
                                    Monthly
                                </button>
                            </div>
                        </div>
                        <div class="relative h-64 sm:h-80">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>

                    <!-- Pendency Chart -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0">
                            <h3 class="text-base sm:text-lg font-semibold text-card-foreground">Pendency Analysis</h3>
                            <div class="flex gap-2">
                                <button class="rounded-md bg-muted px-2 sm:px-3 py-1 text-xs text-muted-foreground hover:bg-accent hover:text-accent-foreground">
                                    By Area
                                </button>
                                <button class="rounded-md bg-primary px-2 sm:px-3 py-1 text-xs text-primary-foreground">
                                    By Age
                                </button>
                            </div>
                        </div>
                        <div class="relative h-64 sm:h-80">
                            <canvas id="pendencyChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activities and Quick Actions -->
                <div class="grid gap-4 sm:gap-6 grid-cols-1 lg:grid-cols-2">
                    <!-- Recent Grievances -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0">
                            <h3 class="text-base sm:text-lg font-semibold text-card-foreground">Recent Grievances</h3>
                            <a href="#" class="text-sm text-primary hover:underline text-left sm:text-right">View All</a>
                        </div>
                        <div class="space-y-3 sm:space-y-4">
                            <div class="flex items-start sm:items-center space-x-3 sm:space-x-4 rounded-lg p-3 sm:p-4 transition-colors hover:bg-muted/50">
                                <div class="h-2 w-2 rounded-full bg-red-500 mt-2 sm:mt-0"></div>
                                <div class="flex-1 space-y-1">
                                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-1 sm:space-y-0">
                                        <p class="text-sm font-medium text-card-foreground">GRV-2025-001</p>
                                        <span class="inline-flex items-center rounded-full bg-red-100 px-2 sm:px-2.5 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900 dark:text-red-200 w-fit">
                                            Urgent
                                        </span>
                                    </div>
                                    <p class="text-sm text-muted-foreground">Pension disbursement delay</p>
                                    <p class="text-xs text-muted-foreground">Submitted 2 hours ago</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start sm:items-center space-x-3 sm:space-x-4 rounded-lg p-3 sm:p-4 transition-colors hover:bg-muted/50">
                                <div class="h-2 w-2 rounded-full bg-yellow-500 mt-2 sm:mt-0"></div>
                                <div class="flex-1 space-y-1">
                                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-1 sm:space-y-0">
                                        <p class="text-sm font-medium text-card-foreground">GRV-2025-002</p>
                                        <span class="inline-flex items-center rounded-full bg-yellow-100 px-2 sm:px-2.5 py-0.5 text-xs font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 w-fit">
                                            Pending
                                        </span>
                                    </div>
                                    <p class="text-sm text-muted-foreground">Medical reimbursement</p>
                                    <p class="text-xs text-muted-foreground">Submitted 5 hours ago</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start sm:items-center space-x-3 sm:space-x-4 rounded-lg p-3 sm:p-4 transition-colors hover:bg-muted/50">
                                <div class="h-2 w-2 rounded-full bg-blue-500 mt-2 sm:mt-0"></div>
                                <div class="flex-1 space-y-1">
                                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-1 sm:space-y-0">
                                        <p class="text-sm font-medium text-card-foreground">GRV-2025-003</p>
                                        <span class="inline-flex items-center rounded-full bg-blue-100 px-2 sm:px-2.5 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-200 w-fit">
                                            In Process
                                        </span>
                                    </div>
                                    <p class="text-sm text-muted-foreground">Gratuity calculation error</p>
                                    <p class="text-xs text-muted-foreground">Submitted 1 day ago</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="rounded-lg border bg-card p-4 sm:p-6 shadow-sm">
                        <h3 class="text-base sm:text-lg font-semibold text-card-foreground mb-4 sm:mb-6">Quick Actions</h3>
                        <div class="grid grid-cols-2 gap-3 sm:gap-4">
                            <button onclick="navigateToSection('register')" class="group flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/25 p-4 sm:p-6 text-center transition-colors hover:border-muted-foreground/50 hover:bg-muted/50">
                                <div class="rounded-full bg-blue-100 p-2 sm:p-3 group-hover:bg-blue-200 dark:bg-blue-900 dark:group-hover:bg-blue-800">
                                    <i class="fas fa-plus-circle h-5 w-5 sm:h-6 sm:w-6 text-blue-600 dark:text-blue-400"></i>
                                </div>
                                <span class="mt-2 text-xs sm:text-sm font-medium text-muted-foreground group-hover:text-foreground text-center">
                                    New Grievance
                                </span>
                            </button>
                            
                            <button class="group flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/25 p-4 sm:p-6 text-center transition-colors hover:border-muted-foreground/50 hover:bg-muted/50">
                                <div class="rounded-full bg-yellow-100 p-2 sm:p-3 group-hover:bg-yellow-200 dark:bg-yellow-900 dark:group-hover:bg-yellow-800">
                                    <i class="fas fa-search h-5 w-5 sm:h-6 sm:w-6 text-yellow-600 dark:text-yellow-400"></i>
                                </div>
                                <span class="mt-2 text-xs sm:text-sm font-medium text-muted-foreground group-hover:text-foreground text-center">
                                    Track Status
                                </span>
                            </button>
                            
                            <button class="group flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/25 p-4 sm:p-6 text-center transition-colors hover:border-muted-foreground/50 hover:bg-muted/50">
                                <div class="rounded-full bg-green-100 p-2 sm:p-3 group-hover:bg-green-200 dark:bg-green-900 dark:group-hover:bg-green-800">
                                    <i class="fas fa-file-alt h-5 w-5 sm:h-6 sm:w-6 text-green-600 dark:text-green-400"></i>
                                </div>
                                <span class="mt-2 text-xs sm:text-sm font-medium text-muted-foreground group-hover:text-foreground text-center">
                                    Generate Report
                                </span>
                            </button>
                            
                            <button class="group flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-muted-foreground/25 p-4 sm:p-6 text-center transition-colors hover:border-muted-foreground/50 hover:bg-muted/50">
                                <div class="rounded-full bg-purple-100 p-2 sm:p-3 group-hover:bg-purple-200 dark:bg-purple-900 dark:group-hover:bg-purple-800">
                                    <i class="fas fa-cog h-5 w-5 sm:h-6 sm:w-6 text-purple-600 dark:text-purple-400"></i>
                                </div>
                                <span class="mt-2 text-xs sm:text-sm font-medium text-muted-foreground group-hover:text-foreground text-center">
                                    Settings
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Footer -->
    <div id="footer-container" class="lg:ml-64"></div>
    
    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load components
            loadComponent('header.html', 'header-container');
            loadComponent('sidebar.html', 'sidebar-container');
            loadComponent('footer.html', 'footer-container');
            
            // Initialize dashboard
            setTimeout(() => {
                initializeDashboard();
            }, 100);
        });
        
        function loadComponent(file, containerId) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    document.getElementById(containerId).innerHTML = data;
                    if (file === 'header.html') initializeHeader();
                    if (file === 'sidebar.html') initializeSidebar();
                })
                .catch(error => console.error('Error loading component:', error));
        }
        
        function initializeDashboard() {
            // Animate stats
            animateNumber('totalGrievances', 1247);
            animateNumber('pendingGrievances', 89);
            animateNumber('inProcessGrievances', 156);
            animateNumber('resolvedGrievances', 1002);
            
            // Initialize charts
            initializeCharts();
        }
        
        function animateNumber(elementId, target) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                element.textContent = Math.floor(current).toLocaleString();
            }, 30);
        }
        
        function initializeCharts() {
            // Status Chart
            const statusCtx = document.getElementById('statusChart');
            if (statusCtx) {
                new Chart(statusCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Pending', 'In Process', 'Resolved'],
                        datasets: [{
                            data: [89, 156, 1002],
                            backgroundColor: [
                                'hsl(45 93% 58%)',
                                'hsl(221 83% 53%)', 
                                'hsl(142 71% 45%)'
                            ],
                            borderWidth: 0,
                            hoverBorderWidth: 2,
                            hoverBorderColor: '#fff'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 20,
                                    usePointStyle: true,
                                    font: {
                                        size: window.innerWidth < 640 ? 10 : 12
                                    }
                                }
                            }
                        },
                        cutout: '70%'
                    }
                });
            }

            // Pendency Chart
            const pendencyCtx = document.getElementById('pendencyChart');
            if (pendencyCtx) {
                new Chart(pendencyCtx, {
                    type: 'bar',
                    data: {
                        labels: ['< 15 days', '15-30 days', '30-60 days', '60+ days'],
                        datasets: [{
                            label: 'Number of Grievances',
                            data: [45, 25, 12, 7],
                            backgroundColor: [
                                'hsl(200 95% 70%)',
                                'hsl(45 93% 70%)',
                                'hsl(25 95% 70%)',
                                'hsl(0 84% 70%)'
                            ],
                            borderRadius: 6,
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            y: { 
                                beginAtZero: true,
                                grid: { 
                                    display: true,
                                    color: 'hsl(214.3 31.8% 91.4%)'
                                },
                                ticks: {
                                    color: 'hsl(215.4 16.3% 46.9%)',
                                    font: {
                                        size: window.innerWidth < 640 ? 10 : 12
                                    }
                                }
                            },
                            x: {
                                grid: { display: false },
                                ticks: {
                                    color: 'hsl(215.4 16.3% 46.9%)',
                                    font: {
                                        size: window.innerWidth < 640 ? 10 : 12
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
        
        function navigateToSection(section) {
            console.log('Navigate to:', section);
        }
    </script>
</body>
</html>